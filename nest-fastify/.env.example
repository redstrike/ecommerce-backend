#-------------------------------------------------------------------------------
# POSTGRESQL DATABASE
#-------------------------------------------------------------------------------
# Credentials for the PostgreSQL database. Used by Docker Compose and the NestJS app.
# For the password, generate a secure secret for your local .env file using:
# > openssl rand -base64 48

POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=ecommerce_backend_dev_db
POSTGRES_USER=ecommerce_backend_dev_user
POSTGRES_PASSWORD=your_super_secret_postgres_password

# PostgreSQL connection pool size. Controls the maximum number of concurrent
# database connections maintained by the application.
# - Development (localhost): 10 is sufficient
# - Production (AWS RDS db.t4g.medium): 25 recommended for HA with 6 app instances
POSTGRES_POOL_SIZE=10

# Minimum number of idle connections to keep in the pool. These connections
# are kept warm to reduce latency for incoming requests.
# - Development (localhost): 1 is optimal (minimal overhead)
# - Production: 5 recommended (keeps connections ready for traffic)
POSTGRES_MIN_POOL_SIZE=1

#-------------------------------------------------------------------------------
# REDIS
#-------------------------------------------------------------------------------
# Connection details for the Redis server.
# Using 'requirepass' for authentication, so no separate user is needed.
# For the password, generate a secure secret for your local .env file using:
# > openssl rand -base64 48

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_super_secret_redis_password

#-------------------------------------------------------------------------------
# TYPEORM
#-------------------------------------------------------------------------------
# We explicitly set synchronize to false to enforce the use of migrations for
# all database schema changes. This ensures consistency between development and
# production environments.
TYPEORM_SYNCHRONIZE=false

# Configures TypeORM's internal logging. Accepts:
# - "true" or "all": Enable all logging.
# - "false" or "": Disable all logging.
# - Comma-separated string: "query,schema,error,warn,info,log,migration"
TYPEORM_LOG_LEVELS=query,schema,error,warn,info,log,migration

#-------------------------------------------------------------------------------
# SUPER ADMIN SETUP
#-------------------------------------------------------------------------------
# Key used to create the first super admin user via the /users endpoint.
SUPER_ADMIN_INITIALIZATION_KEY=your_super_secret_initialization_key

# Comma-separated list of allowed email domains for the super admin.
ALLOWED_ADMIN_DOMAINS=example.com,mycompany.com
